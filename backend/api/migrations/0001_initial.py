# Generated by Django 2.0.5 on 2018-08-21 10:23

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('created_datetime', models.DateTimeField(auto_now_add=True)),
                ('last_modified_datetime', models.DateTimeField(auto_now=True)),
                ('payment_processor', models.CharField(choices=[('Stripe', 'stripe'), ('Braintree', 'braintree'), ('Square', 'square')], default='Stripe', max_length=16, verbose_name='Payment Processor')),
                ('payment_processor_customer_id', models.CharField(blank=True, max_length=255, verbose_name='Payment Processor Customer ID')),
                ('payment_processor_transaction_id', models.CharField(blank=True, max_length=255, verbose_name='Payment Processor Transaction ID')),
                ('amount', models.IntegerField(default=0, verbose_name='The total amount that the user paid')),
                ('tax', models.IntegerField(default=0, verbose_name='Tax amount')),
                ('shipping_fee', models.IntegerField(default=0, verbose_name='Shipping fee')),
                ('discount', models.IntegerField(default=0, verbose_name='Discount amount')),
                ('discount_code', models.CharField(blank=True, max_length=20, verbose_name='Discount code')),
                ('status', models.CharField(choices=[('Pending', 'pending'), ('Awaiting Payment', 'awaiting payment'), ('Awaiting Fulfillment', 'awaiting fulfillment'), ('Awaiting User Input', 'awaiting user input'), ('Awaiting Shipment', 'awaiting shipment'), ('Awaiting Pickup', 'awaiting pickup'), ('Partially Shipped', 'partially shipped'), ('Completed', 'completed'), ('Shipped', 'shipped'), ('Cancelled', 'cancelled'), ('Declined', 'declined'), ('Refunded', 'refunded'), ('Disputed', 'disputed'), ('Manual Verification Required', 'manual verification required'), ('Partially Refunded', 'partially refunded')], default='Pending', max_length=32, verbose_name='Order status')),
                ('notes', models.CharField(blank=True, max_length=512, verbose_name='Admin notes')),
            ],
        ),
        migrations.CreateModel(
            name='OrderProduct',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_datetime', models.DateTimeField(auto_now_add=True)),
                ('last_modified_datetime', models.DateTimeField(auto_now=True)),
                ('subscription_frequency', models.IntegerField(default=0, verbose_name='Subscription frequency in months')),
                ('quantity', models.IntegerField(default=0, verbose_name='Quantity of products made in the order')),
                ('order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='api.Order')),
            ],
        ),
        migrations.CreateModel(
            name='Product',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_datetime', models.DateTimeField(auto_now_add=True)),
                ('last_modified_datetime', models.DateTimeField(auto_now=True)),
                ('type', models.CharField(choices=[('rx', 'rx'), ('moisturizer', 'moisturizer'), ('sunblock', 'sunblock'), ('gift card', 'gift card')], default='rx', max_length=32, verbose_name='Type')),
                ('name', models.CharField(blank=True, max_length=64, verbose_name='Name')),
                ('description', models.CharField(blank=True, max_length=512, verbose_name='Description')),
                ('quantity_available', models.IntegerField(default=0, verbose_name='Quantity available')),
                ('quantity', models.IntegerField(default=0, verbose_name='Quantity')),
                ('quantity_unit', models.CharField(blank=True, max_length=16, verbose_name='Quantity unit')),
                ('strength', models.IntegerField(default=0, verbose_name='Strength')),
                ('strength_unit', models.CharField(blank=True, max_length=16, verbose_name='Strength unit')),
                ('vehicle', models.CharField(blank=True, max_length=32, verbose_name='Vehicle')),
                ('days_supply', models.IntegerField(default=0, verbose_name='Days supply')),
                ('sku', models.CharField(blank=True, max_length=32, verbose_name='SKU')),
                ('price', models.IntegerField(default=0, verbose_name='Price')),
            ],
        ),
        migrations.AddField(
            model_name='orderproduct',
            name='product',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='api.Product'),
        ),
        migrations.AddField(
            model_name='order',
            name='products',
            field=models.ManyToManyField(through='api.OrderProduct', to='api.Product'),
        ),
        migrations.AddField(
            model_name='order',
            name='user',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='user', to=settings.AUTH_USER_MODEL),
        ),
    ]
